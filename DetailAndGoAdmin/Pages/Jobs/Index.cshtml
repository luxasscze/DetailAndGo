@page
@model DetailAndGoAdmin.Pages.Jobs.IndexModel

@{
    ViewData["Title"] = "Index";
    //Layout = "~/Pages/Shared/_Layout.cshtml";
}

<script src="~/lib/jquery/dist/jquery.min.js" asp-append-version="true"></script>
<script>
    console.log('its working...');
    function getUserName(userId) {
        console.log('user id: ' + userId);
        let userName;
        $.ajax({
            url: "?handler=GetUserFullName",
            data: { aspNetUserId: userId },
            type: "GET",
            async: false,
            cache: false,
            beforeSend: function () {

            },
            success: function (data) {
                userName = data;
            },
            error: function (error) {
                console.log(error);
            },
            complete: function () {
                console.log('finished...');
            },
        });
        console.log(userName);
        return userName;
    }
</script>

<h1 style="color: #fff; text-align: center;">Bookings Awaiting Approval</h1>

<div class="row">

    @foreach (var item in Model.Bookings)
    {
        <div class="col-6">
            <div class="card shadow" style="margin-top: 25px; background-color: rgba(0, 0, 0, 0.2);">
                <div class="card-header text-light">
                    <h2 id="username-@item.Id"></h2>
                </div>
                <div class="card-body text-light">
                    <label>Created: @item.Created.ToString("dd/MM/yyyy HH:mm")</label><br />
                    <label>Booked for: @item.BookedFor.ToString("dd/MM/yyyy HH:mm")</label><br />
                    <label>Services: @item.Services</label><br />
                    
                    
                </div>
                <div class="card-footer">
                    <a href="#" class="btn btn-sm btn-outline-success">Accept</a>
                    <a href="#" class="btn btn-sm btn-outline-danger">Decline</a>
                </div>
            </div>
        </div>
        <script>
            $('#username-@item.Id').text(getUserName('@item.AspNetUserId'));
        </script>
    }

</div>

<script>

</script>

@{
    /*<table class="container">
                <thead>
                <tr>
                <th>
                @Html.DisplayNameFor(model => model.Jobs[0].Created)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.Jobs[0].Updated)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.Jobs[0].Status)
        </th>
        </tr>
        </thead>
        <tbody>
        @foreach (var item in Model.Jobs)
                    {
                    <tr>
                    <td>
                    @Html.DisplayFor(modelItem => item.Created)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.Updated)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>

                <td>
                <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
    </td>

    </tr>
    }
    </tbody>
    </table>*/
}


